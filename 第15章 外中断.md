1. 外设的输入不直接送入内存和CPU，而是送入相关的接口芯片的端口中；CPU向外设的输出也不是直接送入外设，而是先送入端口中，再由相关的芯片送到外设。CPU向外设输出的控制命令也是先送到相关芯片的端口中，再由相关芯片根据命令对外设实施控制。

2. 在PC系统中，外中断源一共有两类：

   1. 可屏蔽中断
   2. 不可屏蔽中断

   可屏蔽中断是CPU可以不相应的外中断。CPU是否响应可屏蔽中断，要看标志寄存器中的IF位的设置。当CPU检测到可屏蔽中断信息时，如果IF=1，则在执行完当前指令后，响应中断，引发中断过程。如果IF=0，则不响应。通过将IF设置为0，在进入中断处理程序之后，禁止其他的可屏蔽中断。8086CPU提供了可用于设置IF的指令：

   sti，设置IF=1

   cli，设置IF=0

   不可屏蔽中断是CPU必须响应的外中断。当CPU检测到不可屏蔽中断信息时，则在执行完当前指令之后，立即响应，引发中断过程。

   对于8086CPU，不可屏蔽中断的中断类型码固定为2，所以中断过程中，不需要取中断类型码。不可屏蔽中断的中断过程为：

   1. 标志寄存器入栈，IF=0，TF=0
   2. CS、IP入栈
   3. (IP)=(8)，(CS)=(0AH)

   几乎所有由外设引发的中断，都是可屏蔽中断。当外设有需要处理的事件发生时，相关芯片向CPU发出可屏蔽中断信息。

3. 键盘输入

   键盘上的每一个按键，相当于一个开关，键盘中有一个芯片对键盘上的每一个键的开关状态进行扫描。按下一个键的时候，开关接通，该芯片就产生一个扫描码，扫描码说明了按下的键在键盘上的位置。扫描码被送入主板上的相关接口芯片的寄存器中，该寄存器的端口地址为60H。

   松开按下的键时，也产生一个扫描码，松开按键时产生的扫描码也被送入60H端口

   一般将按下一个键时产生的扫描码称为通码，松开一个键产生的扫描码称为断码。扫描码长度为1个字节，通码的第7位是0，断码的第7位是1。即`断码 = 通码 + 80H`。

   键盘的输入到达60H端口时，相关的芯片会向CPU发出终端类型码为9的可屏蔽中断信息。CPU检测到该中断信息，如果IF=1，则响应中断。

   BIOS提供了9号中断例程，用来处理基本的键盘输入输出。主要工作包括：

   1. 读出60H端口中的扫描码
   2. 如果是字符键的扫描码，将该扫描码和它对应的ascii码送入内存中的BIOS键盘缓冲区。如果是控制键（比如ctrl）和切换键（如CapsLock）的扫描码，则将其转变为状态字节（用二进制位记录控制键和切换键状态的字节）写入内存中存储状态字节的单元。
   3. 对键盘系统进行相关的控制，比如向相关芯片发出应答信息。

   BIOS键盘缓冲区是系统启动后，BIOS用于存放int 9中断例程所接收到的键盘输入的内存区。该内存区可以存放15个键盘输入，一个键盘输入对应一个字单元，高字节存放扫描码，低字节存放字符码。

   

   

   